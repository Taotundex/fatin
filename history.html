<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History</title>
    <link rel="stylesheet" href="board.css">
    <script src="https://kit.fontawesome.com/be0461b2be.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
</head>
<body>
    <div class="dashboard">
        <div class="row g-3">
            <div class="col col-lg-1 col-md-11 col-12">
                <div class="sidebar">
                    <div class="logo">
                        <img src="images/Vector.png" width="100%" alt="">
                    </div>
                    <ul>
                        <li><a href="dashboard.html" class="active"><i class="bi bi-grid"></i></a></li>
                        <li><a href="history.html"><i class="fa-solid fa-clock-rotate-left"></i></a></li>
                        <li><a href="chat.html"><i class="bi bi-chat-left"></i></a></li>
                        <li><a href="setting.html"><i class="bi bi-gear"></i></a></li>
                        <li><a href="dashboard.html" class="d-flex flex-column text-center"><i class="bi bi-upload"></i>Log out</a></li>
                    </ul>
                </div>
            </div>
            <div class="col col-lg-11 col-md-11 col-12">
                <div class="body py-5 px-3">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th><button id="date">Date</button></th>
                                    <th><button id="doctorName">Doctor Name</button></th>
                                    <th><button id="department">Department</button></th>
                                    <th><button id="time">Time</button></th>
                                    <th><button id="diagnosis">Diagnosis</button></th>
                                    <th><button id="instructions">Instructions</button></th>
                                </tr>
                            </thead>
                            <tbody id="table-content"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        const response = {
   "pokedata": [
      {
         "date": "Bulbasaur",
         "doctorName": "Grass",
         "department": 45,
         "time": 49,
         "diagnosis": 49,
         "instructions": 65
      },
      {
         "date": "Ivysaur",
         "doctorName": "Grass",
         "department": 60,
         "time": 62,
         "diagnosis": 63,
         "instructions": 80
      },
      {
         "date": "Venusaur",
         "doctorName": "Grass",
         "department": 80,
         "time": 82,
         "diagnosis": 83,
         "instructions": 100
      },
      {
         "date": "Charmander",
         "doctorName": "Fire",
         "department": 39,
         "time": 52,
         "diagnosis": 43,
         "instructions": 60
      },
      {
         "date": "Charmeleon",
         "doctorName": "Fire",
         "department": 58,
         "time": 64,
         "diagnosis": 58,
         "instructions": 80
      },
      {
         "date": "Charizard",
         "doctorName": "Fire",
         "department": 78,
         "time": 84,
         "diagnosis": 78,
         "instructions": 109
      },
      {
         "date": "Squirtle",
         "doctorName": "Water",
         "department": 44,
         "time": 48,
         "diagnosis": 65,
         "instructions": 50
      },
      {
         "date": "Wartortle",
         "doctorName": "Water",
         "department": 59,
         "time": 63,
         "diagnosis": 80,
         "instructions": 65
      },
      {
         "date": "Blastoise",
         "doctorName": "Water",
         "department": 79,
         "time": 83,
         "diagnosis": 100,
         "instructions": 85
      },
      {
         "date": "Caterpie",
         "doctorName": "Bug",
         "department": 45,
         "time": 30,
         "diagnosis": 35,
         "instructions": 20
      }
   ]
}

const tableContent = document.getElementById("table-content")
const tableButtons = document.querySelectorAll("th button");

const createRow = (obj) => {
  const row = document.createElement("tr");
  const objKeys = Object.keys(obj);
  objKeys.map((key) => {
    const cell = document.createElement("td");
    cell.setAttribute("data-attr", key);
    cell.innerHTML = obj[key];
    row.appendChild(cell);
  });
  return row;
};

const getTableContent = (data) => {
  data.map((obj) => {
    const row = createRow(obj);
    tableContent.appendChild(row);
  });
};

const sortData = (data, param, direction = "asc") => {
  tableContent.innerHTML = '';
  const sortedData =
    direction == "asc"
      ? [...data].sort(function (a, b) {
          if (a[param] < b[param]) {
            return -1;
          }
          if (a[param] > b[param]) {
            return 1;
          }
          return 0;
        })
      : [...data].sort(function (a, b) {
          if (b[param] < a[param]) {
            return -1;
          }
          if (b[param] > a[param]) {
            return 1;
          }
          return 0;
        });

  getTableContent(sortedData);
};

const resetButtons = (event) => {
  [...tableButtons].map((button) => {
    if (button !== event.target) {
      button.removeAttribute("data-dir");
    }
  });
};

window.addEventListener("load", () => {
  getTableContent(response.pokedata);

  [...tableButtons].map((button) => {
    button.addEventListener("click", (e) => {
      resetButtons(e);
      if (e.target.getAttribute("data-dir") == "desc") {
        sortData(response.pokedata, e.target.id, "desc");
        e.target.setAttribute("data-dir", "asc");
      } else {
        sortData(response.pokedata, e.target.id, "asc");
        e.target.setAttribute("data-dir", "desc");
      }
    });
  });
});

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>